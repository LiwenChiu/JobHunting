
@section Styles
{
    
}

<div class="pt-2" >
    <!-- Header-->
    <header class="bg-warning py-5">
        <div class="container px-4 px-lg-5 my-5">
            <div class="text-center text-white">
                @* <h1 class="display-4 fw-bolder">Home Page</h1> *@
                <label style="font-size:700%;">小鴨<img src="~/gif/9e25a15f2aae61fb18f7782b65b6baf7.gif" style="width:30%" />上工</label>
            </div>
        </div>
    </header>
    <br />
    <br />
    @* 搜尋列 *@
    <div class="container border border-2 col-10 mb-4">
        <div class="row calculator-dropdown py-md-2">
            <div class="col-sm-3">
                <label class="calculator-dropdown-label" for="">選擇地區</label>
                <select class="select" name="" id="" style="width:150px;height:30px">
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                </select>
            </div>
            <div class="col-sm-3">
                <label class="calculator-dropdown-label" for="">選擇工時</label>
                <select class="select" name="" id="" style="width:150px;height:30px">
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                </select>
            </div>
            <div class="col-sm-3">
                <label class="calculator-dropdown-label" for="">職業類別</label>
                <select class="select" name="" id="" style="width:150px;height:30px">
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                </select>
            </div>
            <div class="col-sm-3">
                <partial name="_TagsBtnModal" />
            </div>
        </div>
        <div class="row py-md-2">
            <div class="col-10 mb-0">
                <input type="text" class="form-control" placeholder="請輸入關鍵字" />
            </div>
            <div class="col-2 mb-0">
                <button class="btn btn-warning">搜尋</button>
            </div>
        </div>
    </div>

    @* 履歷清單 *@
    <div class="container" id="app1">
        <table class="table table-striped table-hover">
            <thead class="table-warning" align="center">
                <tr>
                    <td>職稱</td>
                    <td>公司名稱</td>
                    <td>地區</td>
                    <td>工作內容</td>
                    <td>應徵 / 儲存</td>
                </tr>
            </thead>
            <tbody align="center">
                <tr v-for="(item,index) in openings.slice(pageStart,pageEnd)">
                    @* <td><a target="_blank" :href=`${baseAddress}/Company/ResumeIntro/${item.opeingID}`>{{item.title}}</a></td> *@
                    <td>{{item.title}}</td>
                    <td>{{item.companyName}}</td>
                    <td>{{item.address}}</td>
                    <td>{{item.description}}</td>
                    <td>{{item.salaryMax}}</td>
                    <td>
                        <button class="btn btn-info">應徵</button>
                        <button class="btn btn-danger">儲存</button>
                    </td>
                </t>
            </tbody>
        </table>
        <div>
            <nav aria-label="Page navigation example">
                <ul class="pagination justify-content-center">
                    <li class="page-item" v-on:click="setPage(currentPage-1)">
                        <a class="page-link" href="#homeList" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <li v-for="item in totalPage" class="page-item" v-on:click="setPage(item)">
                        <a class="page-link" href="#homeList">{{item}}</a>
                    </li>
                    <li class="page-item" v-on:click="setPage(currentPage+1)">
                        <a class="page-link" href="#homeList" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div>

@section Scripts
{
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.4/axios.min.js" integrity="sha512-6VJrgykcg/InSIutW2biLwA1Wyq+7bZmMivHw19fI+ycW0jIjsadm8wKQQLlfv3YUS4owfMDlZU38NtaAK6fSg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        let vueList = {
            data() {
                return {
                    baseAddress: "https://localhost:7169",
                    perpage: 5, //一頁的資料數
                    currentPage: 1,
                    openings: [],
                };
            },
            computed: {
                totalPage() {
                    return Math.ceil(this.openings.length / this.perpage)
                    //Math.ceil()取最小整數
                },
                pageStart() {
                    return (this.currentPage - 1) * this.perpage
                    //取得該頁第一個值的index
                },
                pageEnd() {
                    return this.currentPage * this.perpage
                    //取得該頁最後一個值的index
                },

            },
            methods: {
                setPage(page) {
                    if (page <= 0 || page > this.totalPage) {
                        return
                    }
                    this.currentPage = page
                },
                openingsList() {
                    let self = this;
                    axios.post('https://localhost:7169/Home/OpeningsList', {
                        headers: { 'Content-Type': 'application/json' },
                    }).then(res => {
                        self.openings = res.data;
                        // self.allDegree = res.data.map(x => x.degree).filter((value, index, self) => self.indexOf(value) === index);
                    }).catch(error => {
                        console.error(error);
                    });
                },
            },
            mounted() {
                let self = this;
                self.openingsList();
            }
        };
        let listData = Vue.createApp(vueList).mount("#app1");
    </script>
}